 vcgencmd measure_temp
 
 raspi-gpio set 16 op dh
 
 S
 op = out put
 17 = GPIO pin
 dh = digital high/on
 dl = digital low/off
 
 
 copied old boy's bash script and set the temp to 65oc before the fan comes on
 used a cron job through setting crontab -e
 set it with * * * * * so that it checks the script every second then, because crontab doesnt allow for sub minute commands, i used a 30 second sleeep time then the command agaoin so that it checks every 30 seconds what the temp is.

#!/bin/bash
ontemp=65
gpio -g mode 3 out
temp=$(vcgencmd measure_temp | egrep -o '[0-9]*\.[0-9]*')
echo $temp #use BCM pin 3, as pin 2 is used for PSU control
temp0=${temp%.*}
echo $temp0

if [ $temp0 -gt $ontemp ] 
then
	echo greater than $ontemp fan on
	gpio -g write 3 1
else
	echo less than or equal to  $ontemp fan off
	gpio -g write 3 0
fi

crontab -e
* * * * * sleep 30 /home/pi/PiFanControl/temp-fan.sh

#!/bin/bash
ontemp=30
gpio -g mode 3 out
temp=$(vcgencmd measure_temp | egrep -o '[0-9]*\.[0-9]*')
echo $temp #use GPIO pinm 16 when screen is on
temp0=${temp%.*}
echo $temp0

if [ $temp0 -gt $ontemp ] 
then
        echo greater than $ontemp fan on
        gpio -g write 16 1
else
        echo less than or equal to  $ontemp fan off
        gpio -g write 16 0
fi



short read is power long red is groupnd black is on/off switch